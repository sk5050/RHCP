#!/usr/bin/env python

# author: Sungkweon Hong
# email: sk5050@mit.edu
# Grid model as simple model to test rao star

import math
# import numpy as np
import time

class MANUALModel(object):

    def __init__(self):

        self.init_state=init_state
        self.prob_right_transition = prob_right_transition
        self.size = size
        self.state_list = []
        self.goal = goal

        for i in range(size[0]):
            for j in range(size[1]):
                self.state_list.append((i,j))

        self.action_list = ["U","L","R","D"]

        
    def actions(self, state):
        return ['A']

    
    def is_terminal(self, state):
        return state == "0"

    
    def state_transitions(self, state, action):
        if action=="A":

            if state=="0":
                return [["1",0.5],["2",0.5]]
            elif state=="1":
                return [["3",0.5],["4",0.5]]
            elif state=="2":
                return [["5",0.5],["6",0.5]]
            elif state=="3":
                return [["7",1.0]]
            elif state=="4":
                return [["7",1.0]]
            elif state=="5":
                return [["9",1.0]]
            elif state=="6":
                return [["2",0.2],["8",0.4],["9",0.4]]
            elif state=="7":
                return [["1",0.5],["9",0.5]]
            elif state=="8":
                return [["9",1.0]]

        return new_states


    # def cost(self,state,action):  # cost function should return vector of costs, even though there is a single cost function. 
    #     cost1 = 1.0
    #     if state[1]>=3:
    #         cost2 = 1.0
    #     else:
    #         cost2 = 0.0
    #     return [cost1, cost2]

    
    # def heuristic(self, state,depth=None):
    #     heuristic1 = math.sqrt((state[0]-self.goal[0])**2 + (state[1]-self.goal[1])**2)

    #     if state==(0,3) or state==(1,3) or state==(2,3) or state==(3,3) or state==(2,4):
    #         heuristic2 = 2
    #     elif state==(0,4) or state==(1,4):
    #         heuristic2 = 3
    #     else:
    #         heuristic2 = 1
    #     return [heuristic1, heuristic2]



    def cost(self,state,action):  # cost function should return vector of costs, even though there is a single cost function. 
        cost1 = 1.0
        if state==(0,4) or state==(2,2) or state==(3,4):
            cost2 = 50.0
        else:
            cost2 = 0.0
        return [cost1, cost2]

    
    def heuristic(self, state,depth=None):
        heuristic1 = math.sqrt((state[0]-self.goal[0])**2 + (state[1]-self.goal[1])**2)

        if state==(0,4) or state==(2,2) or state==(3,4):
            heuristic2 = 50.0
        else:
            heuristic2 = 0
        return [heuristic1, heuristic2]



    # def cost(self,state,action):  # cost function should return vector of costs, even though there is a single cost function. 
    #     if state[1]>=3:
    #         cost1 = 1000000.0
    #     else:
    #         cost1 = 1.0
    #     if state[1]>=3:
    #         cost2 = 1.0
    #     else:
    #         cost2 = 0.0
    #     return [cost1, cost2]

    
    # def heuristic(self, state,depth=None):
    #     heuristic1 = math.sqrt((state[0]-self.goal[0])**2 + (state[1]-self.goal[1])**2)

    #     if state==(0,3) or state==(1,3) or state==(2,3) or state==(3,3) or state==(2,4):
    #         heuristic2 = 2
    #     elif state==(0,4) or state==(1,4):
    #         heuristic2 = 3
    #     else:
    #         heuristic2 = 1
    #     return [heuristic1, heuristic2]


    def print_policy(self,policy):

        print("-"*21)
        for j in [4,3,2,1,0]:
            string = ""
            for i in [0,1,2,3,4]:
                string += "|"
                if (i,j) in policy:
                    if policy[(i,j)]=="Terminal":
                        string += " T "
                    else:
                        string += " "+policy[(i,j)]+" "
                else:
                    string += "   "

            string += "|"
            print(string)
            print("-"*21)

    # def print_policy(self,policy):

    #     print("-"*121)
    #     for j in [29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0]:
    #         string = ""
    #         for i in [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]:
    #             string += "|"
    #             if (i,j) in policy:
    #                 if policy[(i,j)]=="Terminal":
    #                     string += " T "
    #                 else:
    #                     string += " "+policy[(i,j)]+" "
    #             else:
    #                 string += "   "

    #         string += "|"
    #         print(string)
    #         print("-"*121)
